<div class="d-flex flex-row">
  <div class="instruction-container col-2 border-end border-3">
    <app-experiment-test-instruction  [product]="{Kategorie: 'Smartphone', Marke: 'Samsung'}" [currentInstructionStep]="currentInstructionStep"
                                      [instructions]="!showHelpInstructions ? instructions : helpInstructions"></app-experiment-test-instruction>
  </div>

  <div (click)="increaseNumberClicks($event)"  class="main w-100">
    <div class="row">
      <div class="col-sm-6">
        <div class="scrollable-list">
          <router-outlet></router-outlet>
        </div>
      </div>
      <div (click)="updateErrorClickBehaviour($event)"  class="col-sm-auto">
        <app-product-off-canvas-menu (toggleEvent) = "increaseToggledMenu($event)" [toggleMenu]="showBasket" [currentRoute]="currentRoute"  [parentCategory]="parentCategory" [parentRoute]="parentRoute"   (routeEvent)="setCurrentRoute($event)"  [menuItems]="productCategories" [links]="categoryLinks"  ></app-product-off-canvas-menu>

      </div>

      <div *ngIf="showBasket" class="col-sm-3 me-3">
        <div class="container-md">
          <div class="">
            <app-basket (hiddenEventEmitter)="toggleBasket()" (checkoutEventEmitter)="checkToFinishExperiment($event)"
                        [basket]=basket>

            </app-basket>
          </div>


        </div>
      </div>
    </div>


    <div class="bottom-nav w-100 shadow">
      <div class="row d-flex flex-row align-items-center">

        <div class="col-md-auto">
          <h2 class="ms-4">Weblab Shop</h2>
        </div>

        <div class="col-3 mt-3">
          <app-auto-complete (onInputClearedEventEmitter)="increaseNumberUsedSearchBar()" (onSelectEventEmitter)="increaseNumberSearchBarUsed()" (click)="setClickedOnSearchBar()"  [products]="products" class="products" (onInputEventEmitter)="findProducts($event)"
                             [placeholder]="'Produkte suchen'">

          </app-auto-complete>
        </div>

        <div class="col-md-auto">
          <div class="d-flex gap-4 flex-row flex-fill align-items-start">
            <div >
              <button class=" btn btn-primary">Anmelden</button>
            </div>
            <div class="d-flex justify-content-end w-100">
              <div class="basket-container w-100">
                <button mat-fab (click)="toggleBasket()" >
                  <mat-icon class="shopping-card-icon" aria-hidden="false" aria-label="Example home icon"
                            fontIcon="shopping_cart">
                  </mat-icon>
                </button>
                <span *ngIf="basket.length > 0" class="basket-number-text">{{basket.length}}</span>

              </div>
            </div>


          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<mat-card *ngIf="loading" class="progress-bar-circle">
  <mat-card-content>
    <h3 class="progress-title fw-bold">Ihre Daten werden gespeichert</h3>
    <mat-progress-spinner
      class="example-margin m-auto"
      [mode]="'indeterminate'"
      [value]="50"
      [color]="'accent'"
    >
    </mat-progress-spinner>
  </mat-card-content>
</mat-card>
