<div class="d-flex flex-row">
  <div class="instruction-container col-2 border-end border-3">
      <app-experiment-test-instruction  [product]="{Kategorie: 'Notebook', Arbeitspeicher: '8 GB', Marke: 'Apple', Tastaturlayout: 'Schweiz'}" [currentInstructionStep]="currentInstructionStep"
                                        [instructions]="!showHelpInstructions ? instructions : helpInstructions"></app-experiment-test-instruction>
  </div>

  <div (click)="updateClickBehaviour($event)"  class="main w-100">
    <div class="row">
      <div class="col-lg-7">
          <div class="scrollable-list">
            <router-outlet></router-outlet>
          </div>
      </div>
      <div class="col-2">
        <app-side-menu (routeEvent)="updateInstructions($event)" [categoryLinks]=categoryLinks
                       [productCategories]="productCategories"
                       [currentRoute]="currentRoute"
                       [parentRoute]="parentRoute"
                       [parentCategory]="parentCategory">
        </app-side-menu>
      </div>

      <div *ngIf="showBasket" class="col-sm-2 me-3">
        <div class="container-md">
          <app-basket (hiddenEventEmitter)="toggleBasket()" (checkoutEventEmitter)="checkToFinishExperiment()"
                      [basket]=basket>

          </app-basket>
        </div>
      </div>
    </div>


    <div class="bottom-nav w-100 shadow">
      <div class="row d-flex flex-row align-items-center">

        <div class="col-md-auto">
          <h2 class="ms-4">Weblab Shop</h2>
        </div>

        <div class="col-3 mt-3">
          <app-auto-complete (onSelectEventEmitter)="updateSearchBarBehaviour($event)" (click)="updateSearchBarBehaviour(null)"  [products]="products" class="products" (onInputEventEmitter)="filterProducts($event)"
                             [placeholder]="'Produkte suchen'">

          </app-auto-complete>
        </div>

        <div class="col-md-auto">
          <div class="d-flex gap-4 flex-row flex-fill align-items-start">
            <div >
              <button class=" btn btn-primary">Anmelden</button>
            </div>
            <button mat-fab (click)="toggleBasket()" >
              <mat-icon class="shopping-card-icon" aria-hidden="false" aria-label="Example home icon"
                        fontIcon="shopping_cart">
              </mat-icon>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<mat-card *ngIf="loading" class="progress-bar-circle">
  <mat-card-content>
    <h3 class="progress-title fw-bold">Ihre Daten werden gespeichert</h3>
    <mat-progress-spinner
      class="example-margin m-auto"
      [mode]="'indeterminate'"
      [value]="50"
      [color]="'accent'"
    >
    </mat-progress-spinner>
  </mat-card-content>
</mat-card>
