<div class="d-flex flex-row">

  <div class="col-2">
    <app-experiment-test-instruction [product]="product" [target]="experimentTest?.goalInstruction??''"
                                     [currentInstructionStep]="currentInstructionStep"
                                     [instructions]="instructions"></app-experiment-test-instruction>
    <div class="d-flex mt-3 justify-content-center align-items-center">
      <button (click)="saveUserNavigationSelection()" class=" btn btn-lg btn-success">Auswahl bestätigen</button>
    </div>
  </div>

  <div style="width: 100%">
    <div class="container-fluid">
      <div class="row">
        <div [ngClass]="{'disabled': (!isSelected('navBarTop') && !selectedInterFace?.navBarTop), 'selected': (isSelected('navBarTop') || selectedInterFace?.navBarTop)}"
          (click)="selectElement('navBarTop', $event)" class=" nav navbar navbar-expand-md shadow w-100 d-flex flex-row justify-content-around">
          <h2 class="shop-title col-sm-2 p-2">Weblab Shop</h2>
          <div class="container d-flex flex-row">
              <div matTooltip="Standardsuchfunktion"
                (click)="selectElement('searchBarTop', $event)"
                   [ngClass]="{'disabled': (!isSelected('searchBarTop') && !selectedInterFace?.searchBarTop), 'selected': (isSelected('searchBarTop') || selectedInterFace?.searchBarTop )}"
                   class="disabled">
                <app-search-bar [disabled]="false" (click)="selectElement('searchBarTop', $event)"
                                [placeholder]="'Standardsuchfunktion'"></app-search-bar>
              </div>

              <div (click)="selectElement('autoCompleteTop', $event)"
                   [ngClass]="{'disabled': (!isSelected('autoCompleteTop') && !selectedInterFace?.autoCompleteTop), 'selected':(isSelected('autoCompleteTop') || selectedInterFace?.autoCompleteTop)}"
                   class="ms-3 me-4 w-50" matTooltip="Suchfunktion mit Autovervollständigung">
                <app-auto-complete [products]="products" class="products"
                                   [placeholder]="'Suchfunktion mit Autovervollständigung'">

                </app-auto-complete>
              </div>

          </div>

          <div (click)="selectElement('shoppingCartTopLeft', $event)"
               [ngClass]="{'disabled': (!isSelected('shoppingCartTopLeft') && !selectedInterFace?.shoppingCartTopLeft), 'selected':( isSelected('shoppingCartTopLeft') || selectedInterFace?.shoppingCartTopLeft)}"
               class="ms-3">
            <button mat-fab>
              <mat-icon class="shopping-card-icon" aria-hidden="false" aria-label="Example home icon"
                        fontIcon="shopping_cart">
              </mat-icon>
            </button>
          </div>

          <div class="w-75 me-3 d-flex justify-content-end ">
            <div (click)="selectElement('shoppingCartTopRight', $event)"
                 [ngClass]="{'disabled': (!isSelected('shoppingCartTopRight') && !selectedInterFace?.shoppingCartTopRight), 'selected':( isSelected('shoppingCartTopRight') || selectedInterFace?.shoppingCartTopRight) }">
              <button mat-fab>
                <mat-icon class="shopping-card-icon" aria-hidden="false" aria-label="Example home icon"
                          fontIcon="shopping_cart">
                </mat-icon>
              </button>
            </div>
          </div>

        </div>
      </div>
      <div (click)="selectElement('megaDropDown', $event)"
           [ngClass]="{'disabled': (!isSelected('megaDropDown') && !selectedInterFace?.megaDropDown), 'selected': (isSelected('megaDropDown') || selectedInterFace?.megaDropDown) }"
           class="mt-1 row">
        <div matTooltip="Mega Drop Down Menu">
          <nav class="navbar navbar-expand-lg bg-body-tertiary">
            <div class="container-fluid">
              <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                  <li class="nav-item" *ngFor="let category of parentProductCategories; index as i">
                    <a [ngClass]="{'fw-bold': i == 0}" class=" link-offset-2 link-offset-3-hover fw-bold
                      link-underline link-underline-opacity-0 link-underline-opacity-75-hover nav-link">{{ category }}
                    </a>
                  </li>
                </ul>
              </div>
            </div>
          </nav>
          <div class="mt-2 w-100 container-fluid mega-drop-down">
            <div class="row">
              <div class="w-100 container-fluid mega-drop-down">
                <div class="row">
                  <div class="col-md-auto">
                    <ul class="list-group-flush list-group">
                      <div class="list-group-item w-100 ">
                        <div>
                          <h5 class="mb-1 p-1">Kategorien</h5>
                        </div>
                      </div>
                      <li class="list-group-item list-group-item-action"
                          *ngFor="let category of dummyCategories; index as i">
                        <a class="link-offset-2 link-offset-3-hover fw-bold
                      link-underline link-underline-opacity-0 link-underline-opacity-75-hover nav-link"
                        >{{ category }}</a>
                      </li>
                    </ul>
                  </div>
                  <div class="col-md-auto">
                    <ul class="grid-list list-group-flush list-group">
                      <div class="list-group-item w-100 ">
                        <div>
                          <h5 class="mb-1 p-1">Beliebte Kategorien </h5>
                        </div>
                      </div>
                      <li class="list-group-item list-group-item-action">
                        <a
                          class="link-offset-2 link-offset-3-hover fw-bold link-underline link-underline-opacity-0 link-underline-opacity-75-hover nav-link">Smartphone
                          und Tablets</a>
                      </li>
                    </ul>
                  </div>
                </div>

              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="mt-1 row">
        <div
          [ngClass]="{'disabled': (!isSelected('sideMenuLeft') && !selectedInterFace?.sideMenuLeft), 'selected': (isSelected('sideMenuLeft') || selectedInterFace?.sideMenuLeft)}"
          (click)="selectElement('sideMenuLeft', $event)" class="col-3">
          <div class="mt-1 ms-3 d-flex flex-row gap-3">
            <button (click)="selectElement('menuToggleIcon', $event)"
              [ngClass]="{'disabled': (!isSelected('menuToggleIcon') && !selectedInterFace?.menuToggleIcon), 'selected': (isSelected('menuToggleIcon') || selectedInterFace?.menuToggleIcon)}"
              class="mt-2" mat-fab>
              <mat-icon >menu</mat-icon>
            </button>
            <h3 (click)="selectElement('menuTitle', $event)"
                [ngClass]="{'disabled': (!isSelected('menuTitle') && !selectedInterFace?.menuTitle), 'selected': (isSelected('menuTitle') || selectedInterFace?.menuTitle)}"
                class="menu-title p-3">Menu</h3>
          </div>
          <app-side-menu [categoryLinks]=categoryLinks
                         [productCategories]="productCategories"
                         [currentRoute]="currentRoute"
                         [parentRoute]="parentRoute"
                         [parentCategory]="parentCategory">
          </app-side-menu>
        </div>

        <div class="col-5 scrollable-list">
          <div (click)="selectElement('breadcrumbs',$event)"
               [ngClass]="{'disabled': (!isSelected('breadcrumbs') && !selectedInterFace?.breadcrumbs), 'selected': (isSelected('breadcrumbs') || selectedInterFace?.breadcrumbs)}"
               class="col">
            <p>Zusätzliche Links (Breadcrumbs)</p>
            <a class="link-underline">Home > IT und Multimedia > PC und Notebooks > ...</a>
          </div>
          <div (click)="selectElement('filter',$event)"
               [ngClass]="{'disabled': (!isSelected('filter') && !selectedInterFace?.filter), 'selected': (isSelected('filter')|| selectedInterFace?.filter)}"
               class="mt-3">
            <div class="ms-2 fw-bold ">
              Filter
            </div>
            <div class="ms-2">
              <app-filter-select-dropdown (click)="selectElement('filter',$event)" [values]="['Apple']"
                                          [title]="'Marke'"></app-filter-select-dropdown>

            </div>
          </div>
          <router-outlet></router-outlet>
        </div>

        <div (click)="selectElement('sideMenuRight', $event)"
             [ngClass]="{'disabled': (!isSelected('sideMenuRight') && !selectedInterFace.sideMenuRight), 'selected': isSelected('sideMenuRight')}"
             class="col-3 ">
          <app-side-menu (routeEvent)="setCurrentRoute($event)" [categoryLinks]=categoryLinks
                         [productCategories]="productCategories"
                         [currentRoute]="currentRoute"
                         [parentRoute]="parentRoute"
                         [parentCategory]="parentCategory">
          </app-side-menu>
        </div>
      </div>
    </div>

    <div class="bottom-nav mt-1 shadow">
      <div
        [ngClass]="{'disabled': (!isSelected('navbarBottom') && !selectedInterFace.navBarBottom), 'selected':( isSelected('navbarBottom') || selectedInterFace.navBarBottom) }"
        (click)="selectElement('navbarBottom', $event)" class="nav navbar navbar-expand-md shadow w-100">
        <h2 class="shop-title col-sm-2 p-2">Weblab Shop</h2>
        <div class="container d-flex flex-row ">
          <div (click)="selectElement('searchBarBottom', $event)"
               [ngClass]="{'disabled': (!isSelected('searchBarBottom') && !selectedInterFace.searchBarBottom), 'selected': (isSelected('searchBarBottom') || selectedInterFace.searchBarBottom) }"
               class="disabled" matTooltip="Standardsuchfunktion">
            <app-search-bar [disabled]="false" (click)="selectElement('searchBarBottom', $event)"
                            [placeholder]="'Standardsuchfunktion'"></app-search-bar>
          </div>

          <div (click)="selectElement('autoCompleteBottom', $event)"
               [ngClass]="{'disabled': (!isSelected('autoCompleteBottom') && !selectedInterFace.autoCompleteBottom), 'selected': (isSelected('autoCompleteBottom') || selectedInterFace.autoCompleteBottom)}"
               class="ms-3 me-4 w-50" matTooltip="Suchfunktion mit Autovervollständigung">
            <app-auto-complete [products]="products" class="products"
                               [placeholder]="'Suchfunktion mit Autovervollständigung'">

            </app-auto-complete>
          </div>
        </div>

        <div (click)="selectElement('shoppingCartBottomLeft', $event)"
             [ngClass]="{'disabled': (!isSelected('shoppingCartBottomLeft') && selectedInterFace.shoppingCartTopLeft), 'selected': (isSelected('shoppingCartBottomLeft') || selectedInterFace.shoppingCartBottomLeft) }"
             class="ms-3">
          <button mat-fab>
            <mat-icon class="shopping-card-icon" aria-hidden="false" aria-label="Example home icon"
                      fontIcon="shopping_cart">
            </mat-icon>
          </button>
        </div>

        <div class="w-100 me-3 d-flex justify-content-end ">
          <div (click)="selectElement('shoppingCartBottomRight', $event)"
               [ngClass]="{'disabled': (!isSelected('shoppingCartBottomRight') && selectedInterFace.shoppingCartBottomRight), 'selected': (isSelected('shoppingCartBottomRight') || selectedInterFace.shoppingCartBottomRight) }">
            <button mat-fab>
              <mat-icon class="shopping-card-icon" aria-hidden="false" aria-label="Example home icon"
                        fontIcon="shopping_cart">
              </mat-icon>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<mat-card *ngIf="loading" class="progress-bar-circle">
  <mat-card-content>
    <h3 class="progress-title fw-bold">Vielen Dank. Haben Sie einen moment Geduld, die Schnittstelle wird für Sie
      eingerichtet.</h3>
    <mat-progress-spinner class="m-auto"
                          [mode]="'indeterminate'"
                          [value]="50"
                          [color]="'accent'"
    >
    </mat-progress-spinner>
  </mat-card-content>
</mat-card>

